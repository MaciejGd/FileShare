<!DOCTYPE html >
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./test_folder/main.css" type="text/css">
    <script src="test_folder/main.js"></script>
  </head>
  <body>
    <div>
      <h1 id="title">FILES TO DOWNLOAD</h1>
      <script>
        function fetchJSONData() {
          fetch("./.download.json").then((res) => {
            if (!res.ok)
              throw new Error (`HTTP error! Status: ${res.status}`);
            return res.json();
          })
          .then((data) => 
          {
            console.log(data)
            populateList(data);
          })
          .catch((error) => 
            console.error("Unable to fetch data:", error));
        }
        fetchJSONData();
        function populateList(data)
        {
          var list = document.getElementById("list");
          list.innerHTML = "";

          data.files.forEach(file => {
            const listItem = document.createElement("li");
            const link = document.createElement("a");
            //have to change it actually
            link.href = file.url;
            link.textContent = file.name;
            if (file.dir == 0)
              link.setAttribute('download','');
            else {
              link.textContent+="------------------> this is dir";
            }
            listItem.appendChild(link);
            list.appendChild(listItem);
          })
          
        }
      </script>
	  <ul id="list">
	  </ul>
    </div>
  </body>
</html>
